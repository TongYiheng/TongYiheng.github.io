<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>计算机网络复习笔记 - TongYiheng&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="TongYiheng&#039;s Blog"><meta name="msapplication-TileImage" content="/images/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="TongYiheng&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="How to build a network?"><meta property="og:type" content="blog"><meta property="og:title" content="计算机网络复习笔记"><meta property="og:url" content="https://tongyiheng.github.io/2021/06/13/Computer%20Networks/revision/"><meta property="og:site_name" content="TongYiheng&#039;s Blog"><meta property="og:description" content="How to build a network?"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://tongyiheng.github.io/images/cover/ComputerNetworks.jpg"><meta property="article:published_time" content="2021-06-13T02:18:35.000Z"><meta property="article:modified_time" content="2021-06-21T12:21:55.120Z"><meta property="article:author" content="TongYiheng"><meta property="article:tag" content="Computer Networks"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/images/cover/ComputerNetworks.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://tongyiheng.github.io/2021/06/13/Computer%20Networks/revision/"},"headline":"计算机网络复习笔记","image":["https://tongyiheng.github.io/images/cover/ComputerNetworks.jpg"],"datePublished":"2021-06-13T02:18:35.000Z","dateModified":"2021-06-21T12:21:55.120Z","author":{"@type":"Person","name":"TongYiheng"},"description":"How to build a network?"}</script><link rel="canonical" href="https://tongyiheng.github.io/2021/06/13/Computer%20Networks/revision/"><link rel="icon" href="/images/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="TongYiheng's Blog" type="application/atom+xml">
</head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">TongYiheng&#039;s Blog</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/TongYiheng/TongYiheng.github.io"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="/images/cover/ComputerNetworks.jpg" alt="计算机网络复习笔记"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-06-13T02:18:35.000Z" title="2021-6-13 10:18:35 ├F10: AM┤">2021-06-13</time>发表</span><span class="level-item"><time dateTime="2021-06-21T12:21:55.120Z" title="2021-6-21 8:21:55 ├F10: PM┤">2021-06-21</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Notes/">Notes</a></span><span class="level-item">1 小时读完 (大约11953个字)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">计算机网络复习笔记</h1><div class="content"><p>How to build a network?</p>
<span id="more"></span>
<h1 id="computer-networks"><a class="markdownIt-Anchor" href="#computer-networks"></a> Computer Networks</h1>
<h2 id="写在前面"><a class="markdownIt-Anchor" href="#写在前面"></a> 写在前面</h2>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mi>M</mi><mi>b</mi><mi>p</mi><mi>s</mi><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>6</mn></msup><mi>b</mi><mi>p</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">1Mbps=10^{6}bps</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault">b</span><span class="mord mathdefault">p</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.008548em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span></span><span class="mord mathdefault">b</span><span class="mord mathdefault">p</span><span class="mord mathdefault">s</span></span></span></span><br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mi>G</mi><mi>b</mi><mi>p</mi><mi>s</mi><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup><mi>b</mi><mi>p</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">1Gbps=10^{9}bps</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mord mathdefault">G</span><span class="mord mathdefault">b</span><span class="mord mathdefault">p</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.008548em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span></span><span class="mord mathdefault">b</span><span class="mord mathdefault">p</span><span class="mord mathdefault">s</span></span></span></span></p>
<h2 id="第一章引言"><a class="markdownIt-Anchor" href="#第一章引言"></a> 第一章：引言</h2>
<h3 id="11-名词解释"><a class="markdownIt-Anchor" href="#11-名词解释"></a> 1.1 名词解释</h3>
<ul>
<li>计算机网络：一组通过单一技术相互连接的自主计算机集合。</li>
<li>VPN（Virtual Private Networks）：虚拟专用网络。</li>
<li>peer-to-peer：对等。</li>
<li>RFID（Radio Frequency IDentification）：射频识别。</li>
<li>hotspot：无线热点。</li>
<li>GPS（Global Positioning System）：全球定位系统。</li>
<li>NFC（Near Field Communication）：近场通信。</li>
<li><strong>点到点</strong></li>
<li><strong>端到端</strong></li>
<li>单播（unicasting）、广播（broadcasting）、组播（multicasting）</li>
<li>PAN（Personal Area Network）：个域网</li>
<li>LAN（Local Area Network）：局域网</li>
<li>WIFI：无线局域网的一个标准 IEEE 802.11</li>
<li>Ethernet：以太网 IEEE 802.3</li>
<li>VLAN（Virtual LAN）：虚拟局域网</li>
<li>MAN（Metropolitan Area Network）：城域网</li>
<li>WAN（Wide Area Network）：广域网</li>
<li>通信子网（subnet）、子网：子网的工作是把信息从一个主机携带到另一个主机。<br />
子网由两个不同部分组成：传输线路（e.g. 铜线、光纤、无线）和交换元素（交换机、路由器）。</li>
<li>ISP（Internet Service Provider）：Internet服务提供商<br />
相应的子网称为ISP网络。</li>
<li>协议：通信双方就如何进行通信的一种约定。</li>
<li>对等体：不同机器上构成相应层次的实体。</li>
<li>接口：定义了下层向上层提供哪些原语操作和服务。</li>
<li>网络体系结构：层和协议的集合。</li>
<li>协议栈：一个特定的系统所使用的一组协议，即每一层一个协议。</li>
<li>统计复用：许多网络设计根据主机的短期需求变化动态共享网络带宽，而不是给每个主机分配可能用也可能不会用的固定比例带宽。</li>
<li>流量控制：保持快速发送方不会用数据把慢速接收方淹没。</li>
<li>拥塞：太多的计算机需要发送太多的流量，而网络没有能力传递所有的数据包。</li>
<li>面向连接的服务：按照电话系统建模。</li>
<li>无连接服务：按照邮政系统建模。</li>
<li>存储-转发交换：中间节点只能在收到报文的全部内容后再将该报文发送给下一个节点。</li>
<li>直通式交换：报文还未全部接受完毕之前就向下一个节点传输。</li>
<li>DNS（Domain Name System）：将主机名字映射到网络地址。</li>
<li>ISO（International Standards Organization）：国际标准化组织。</li>
<li>OSI（Open Systems Interconnection）：开放系统互连。</li>
<li>物理层：关注在一条通信信道上传输原始比特。</li>
<li>数据链路层：将一个原始的传输设施转变成一条没有漏检传输错误的线路。</li>
<li>网络层：控制子网的运行。关注如何将数据报从源端路由到接收方。</li>
<li>传输层：接收来自上一层的数据，在必要的时候把这些数据分割成较小的单元，然后把这些数据单元传递给网络层，并且确保这些数据单元正确地到达另一端。</li>
<li>IP（Internet Protocol）：因特网协议。</li>
<li>ICMP（Internet Control Message Protocol）：因特网控制报文协议。</li>
<li>TCP（Transport Control Protocol）：传输控制协议，可靠的、面向连接的。</li>
<li>UDP（User Datagram Protocol）：用户数据报协议，不可靠的、无连接的。</li>
<li>DSL（Digital Subscriber Line）：数字用户线。</li>
<li>modem ：调制解调器。</li>
<li>CMTS（Cable Modem Termination System）：线缆调制解调终端系统。</li>
<li>宽带（broadband）：以高于拨号速率（56kbps）接入Internet。</li>
<li>FTTH（Fiber to the Home）：光纤到户。</li>
<li>POP（Point of Presence）：ISP存点，客户数据报进入ISP网络使用其服务的位置。</li>
<li>IXP（Internet eXchange Point）：Internet交换点。相互连接的ISP被认为彼此对等。</li>
<li>AMPS（Advanced Mobile Phone System）：高级移动电话系统。 1G</li>
<li>GSM（Global System for Mobile communications）：全球移动通信系统。 2G</li>
<li>UMTS（Universal Mobile Telecommunications System）：通用移动通信系统。 3G</li>
<li>CDMA（Code Division Multiple Access）：码分多址。</li>
<li>WCDMA（Wideband Code Division Multiple Access）：宽带码分多址。</li>
<li>GPRS（General Packet Radio Service）：通用数据报无线业务。</li>
<li>软切换（soft handover）–硬切换（hard handover）</li>
<li>SIM（Subscriber Identity Module）：用户识别模块。</li>
<li>ISM（Industral Scientific and Medical）：工业科学医疗频段。</li>
<li>AP（Access Point）：接入点。</li>
<li>OFDM（Orthogonal Frequency Division Multiplexing）：正交频分复用。</li>
<li>CSMA（Carrier Sense Multiple Access）：载波侦听多路访问。</li>
<li>WPA（WiFi Protected Access）：WiFi保护接入。</li>
</ul>
<h2 id="第二章物理层"><a class="markdownIt-Anchor" href="#第二章物理层"></a> 第二章：物理层</h2>
<h3 id="21-数据通信的理论基础"><a class="markdownIt-Anchor" href="#21-数据通信的理论基础"></a> 2.1 数据通信的理论基础</h3>
<h4 id="211-傅里叶分析"><a class="markdownIt-Anchor" href="#211-傅里叶分析"></a> 2.1.1 傅里叶分析</h4>
<h4 id="212-带宽有限的信号"><a class="markdownIt-Anchor" href="#212-带宽有限的信号"></a> 2.1.2 带宽有限的信号</h4>
<ul>
<li>带宽：在传输过程中振幅不会明显减弱的频率的宽度。</li>
<li>带宽是传输介质的一种物理特性，通常取决于介质的构成、厚度和电线或者光纤的长度。</li>
<li>一般将从0到某个最大频率的信号称为基带信号，将被搬移并占用某个更大频率范围的信号称为通带信号。</li>
</ul>
<h4 id="213-信道的最大数据速率"><a class="markdownIt-Anchor" href="#213-信道的最大数据速率"></a> 2.1.3 信道的最大数据速率</h4>
<ul>
<li>
<p>尼奎斯特定理</p>
<ul>
<li>在<strong>无噪声信道</strong>中，如果物理带宽为B，信号离散度等级为V，则该信道最大数据速率 （数字带宽）=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mi>B</mi><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>V</mi><mtext> </mtext><mi>b</mi><mi>p</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">2B log_{2}V \ bps</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="mspace"> </span><span class="mord mathdefault">b</span><span class="mord mathdefault">p</span><span class="mord mathdefault">s</span></span></span></span>，计算后还要乘每秒采样数。</li>
<li>任意一个信号的通过一个物理带宽为B的低通滤波器只要进行每秒2B次的采样就可完全重构出被滤掉的信号。</li>
<li>信道一定，物理带宽确定时，要提高数字带宽只有<strong>增加离散等级</strong>。</li>
</ul>
</li>
<li>
<p>香农定理</p>
<ul>
<li>在<strong>有噪声信道</strong>中，如果物理带宽为B，信噪比为S/N，则该信道最大数据速率 （数字带宽）=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>B</mi><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>S</mi><mi mathvariant="normal">/</mi><mi>N</mi><mo stretchy="false">)</mo><mtext> </mtext><mi>b</mi><mi>p</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">B log_{2}(1+S/N) \ bps</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace"> </span><span class="mord mathdefault">b</span><span class="mord mathdefault">p</span><span class="mord mathdefault">s</span></span></span></span></li>
<li>分贝值=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>10</mn><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>10</mn></msub><mi>S</mi><mi mathvariant="normal">/</mi><mi>N</mi><mtext> </mtext><mi>d</mi><mi>B</mi></mrow><annotation encoding="application/x-tex">10log_{10}S/N \ dB</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace"> </span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span></li>
<li>信道一定，物理带宽确定时，要提高数字带宽只有<strong>增加信噪比</strong>。</li>
</ul>
</li>
</ul>
<h3 id="22-引导性传输介质"><a class="markdownIt-Anchor" href="#22-引导性传输介质"></a> 2.2 引导性传输介质</h3>
<ul>
<li>全双工（full-deplex）：可以双向同时使用的链路。</li>
<li>半双工（half-deplex）：可以双向使用但是一次只能使用一个方向的链路。</li>
<li>单双工（simplex）：只允许一个方向上的传输的链路。</li>
</ul>
<h3 id="23-无线传输"><a class="markdownIt-Anchor" href="#23-无线传输"></a> 2.3 无线传输</h3>
<h3 id="24-通信卫星"><a class="markdownIt-Anchor" href="#24-通信卫星"></a> 2.4 通信卫星</h3>
<h3 id="25-数字调制与多路复用"><a class="markdownIt-Anchor" href="#25-数字调制与多路复用"></a> 2.5 数字调制与多路复用</h3>
<ul>
<li>基带传输：信号的传输占有传输介质上从零到最大值之间的全部频率。</li>
<li>通带传输：信号占据了以载波信号频率为中心的一段频带。</li>
</ul>
<h4 id="251-基带传输"><a class="markdownIt-Anchor" href="#251-基带传输"></a> 2.5.1 基带传输</h4>
<ul>
<li>NRZ（Non-Return-to-Zero）：不归零。</li>
<li>曼彻斯特编码
<ul>
<li>从低到高：逻辑0</li>
<li>从高到低：逻辑1</li>
<li>需要两倍于NRZ编码的带宽。</li>
</ul>
</li>
<li>NRZI（Non-Return-to-Zero Inverted）：不归零逆转
<ul>
<li>信号有跳变：1</li>
<li>信号无跳变：0</li>
</ul>
</li>
<li>4B/5B
<ul>
<li>4个比特被映射为5个比特</li>
<li>保证永远不会出现连续三个0</li>
</ul>
</li>
<li>双极编码
<ul>
<li>使用两个电压级别表示逻辑1</li>
<li>发送1时在+1V和-1V之间进行选择</li>
</ul>
</li>
</ul>
<h4 id="252-通带传输"><a class="markdownIt-Anchor" href="#252-通带传输"></a> 2.5.2 通带传输</h4>
<ul>
<li>ASK（Amplitude Shift Keying）：幅移键控。通过两个不同的振幅表示0和1。</li>
<li>FSK（Frequency Shift Keying）：频移键控。通过两个不同的频率表示0和1。
<ul>
<li>最简单的形式是相移键控（PSK，Phase Shift Keying）。</li>
<li>二进制相移键控（BPSK，Binary Phase Shift Keying）：载波波形偏移0°或180°。</li>
<li>正交相移键控（QPSK，Quadrature Phase Shift Keying）：4个偏移，45°、135°、225°、315°。</li>
</ul>
</li>
</ul>
<h4 id="253-频分复用"><a class="markdownIt-Anchor" href="#253-频分复用"></a> 2.5.3 频分复用</h4>
<ul>
<li>FDM：Frequency Division Multiplexing</li>
<li>保护带（guardband）：使信道之间完全隔离。</li>
<li>OFDM（Orthogonal Frequency Division Multiplexing）：正交频分复用。</li>
</ul>
<h4 id="254-时分复用"><a class="markdownIt-Anchor" href="#254-时分复用"></a> 2.5.4 时分复用</h4>
<ul>
<li>TDM：Time Division Multiplexing</li>
<li>每个用户周期性获得整个带宽非常短的一个时间。</li>
<li>要求时间上必须同步，各用户需要的带宽不均衡，而TDW用户时间片的使用却是一样的，将造成信道的浪费，不高效。</li>
</ul>
<h4 id="255-码分复用"><a class="markdownIt-Anchor" href="#255-码分复用"></a> 2.5.5 码分复用</h4>
<ul>
<li>CDMA：Code Division Multiple Access</li>
<li>允许每个站利用整个频段发送信号，没有时间限制。</li>
<li>可以将TDM看作许多人按顺序交谈，将FDM看作不用人按不同语调交谈，CDMA则是每对交谈者使用不用的语言。</li>
<li>CDMA关键在于能够提取出需要的信号，同时拒绝所有其他的信号并把这些信号当作噪声。</li>
</ul>
<h3 id="26-公共电话交换网络"><a class="markdownIt-Anchor" href="#26-公共电话交换网络"></a> 2.6 公共电话交换网络</h3>
<ul>
<li>本地回路(Local loops)：模拟线路，连接端局和千家万户，通常用三类双绞线承担。</li>
<li>干线、中继线(Trunks)：数字光纤，连接交换局。</li>
<li>交换局(Switching offices)：语音接驳干线的场所，包括端局。</li>
<li>56k（64k）的调制解调器：V.90标准电话线路频率为4kHz，采样率=2×4000=8000sample/sec=2×4000=8000sample/sec，每个码元传输8bit，其中1个比特控制错误，故传输数据速率=8000×7=56000kbps=8000×7=56000kbps，若算上控制错误的比特，毛速率为64kbps。</li>
<li>ADSL（Asymmetric Digital Subscriber Lines）： 非对称数字用户线。</li>
<li>连接调制解调器的本地回路带宽，被限制为4k，因为电话占频为4k；xDSL取消了电话系统里的滤波器后，可使用本地回路的全部（1.1兆）物理带宽。</li>
<li>使用离散多音（DMT，Discrete MultiTone）调制方法的ADSL操作：
<ul>
<li>1.1MHz的频谱，分为256根信道，每根4kHz（4312.5Hz）。信道0用于简单老式电话服务（POTS），信道1~5空闲， 剩下250条信道中，一条用于上行流控制，一条用于下行流控制，剩余248条信道用于数据传输。</li>
<li>每条信道内使用QAM调制方案，速率约为4000符号/秒。</li>
<li>QAM-64每个符号传输6bits。</li>
<li>1999年设定国际标准G.dmt，下行速度8Mbps，上行速度1Mbps。</li>
</ul>
</li>
<li>DSLAM（Digital Subscriber Line Access Multiplexer）：数字用户线路接入复用器。</li>
<li>NID（Network Interface Device）：网络接口设备。</li>
<li>光纤入户（FttH）:
<ul>
<li>PON（Passive Optical Network）：无源光网络。</li>
<li>下行流：光分离器 。上行流：光合并器。</li>
</ul>
</li>
<li>脉冲编码调制，PCM，Pulse Code Modulation
<ul>
<li>模拟信号数字化的技术。构成了现代PSTN的核心。</li>
<li>采样、量化、编码、传输。</li>
<li>每125微秒发送一个语音样值，该采样率足以捕捉4kHz电话信道带宽上的信息。</li>
</ul>
</li>
<li>时分多路复用TDM
<ul>
<li>T1载波（北美和日本），24路。</li>
<li>每帧24*8=192个比特，加上控制用的一个比特的帧码，每125微秒产生193个比特，即<strong>数据传输率为193bits/0.000125s=1.544Mbps</strong></li>
<li>每个样值中每个信道有7个数据比特。</li>
<li>E1载波（中国），32路语音的复用<br />
每125微秒传递32*8=256个比特，即<strong>数据传输率为256bits/0.000125s=2.048Mbps</strong></li>
<li>TDM允许更高级别的复用，比如4条T1流复用为1条T2流，7条T2流复用为1条T3流（每一步复用有少量开销用于同步控制、成帧）</li>
</ul>
</li>
<li>SONET/SDH，光介质上进行同步数据传输的标准
<ul>
<li>SONET（Synchronous Optical NETwork）：同步光网络，美国ANSIS制定。</li>
<li>SDH（Synchronous Digital Hierarchy）：同步数字序列，国际标准组织ITU制定。</li>
<li>每隔125微秒发送810字节数据块，SONET是同步系统故不管是否有用该帧都被发送出去，<strong>总的传输速率为51.84Mbps</strong>。</li>
<li>9行，90列，有效载荷（SPE）为87列，共87×9×8bit×8000sample/sec=50.112Mbps。</li>
<li>SPE第一列是路径开销，因此用户数据为86列。</li>
<li>每帧前三列，保留用作传输系统管理信息。
<ul>
<li>前三列的前三行包含section开销。</li>
<li>前三列的后六行包含line开销，其中前两个字节包含了指向SPE首地址的指针。</li>
</ul>
</li>
<li>源端正在构造SONET空帧时来了一个有效载荷数据，它可直接半途插入到当前构造的帧中，比如下图，SPE就从第1个帧的半途开始，横跨了两个帧。</li>
<li>对应于STS-n的光纤载波称为OC-n，其复用也是按比特进行的</li>
<li>如果一个载波（比如OC-3）没有被复用，而是仅承载了来自单个源的数据，则在线路名称后面加一个字母c（表示级联），因此OC-3表示由三条独立的OC-1载波构成的一条155.52Mbps载波，而OC-3c则表示来自于单个源的155.52Mbps数据流。</li>
</ul>
</li>
<li>波分多路复用WDM
<ul>
<li>WDM，Wavelength Division Multiplexing</li>
<li>波长λ，c=λf</li>
<li>按照波长分成若干份，承载不同用户的光信号。</li>
</ul>
</li>
<li>交换
<ul>
<li>电路交换</li>
<li>包交换</li>
</ul>
</li>
</ul>
<h2 id="第三章数据链路层"><a class="markdownIt-Anchor" href="#第三章数据链路层"></a> 第三章：数据链路层</h2>
<h3 id="31-数据链路层的设计问题"><a class="markdownIt-Anchor" href="#31-数据链路层的设计问题"></a> 3.1 数据链路层的设计问题</h3>
<ul>
<li>无确认的无连接服务。 以太网</li>
<li>有确认的无连接服务。WiFi。</li>
<li>有确认的有连接服务。</li>
<li>成帧：
<ul>
<li>字节计数法：每帧开始使以一个计数字段表示该帧的总字符数。</li>
<li>字节填充的标志字节法：
<ul>
<li>以某些特殊字符作帧的开始/结束标志，同时增加转义环节以免该字符无法表达。</li>
<li>缺点：容易造成帧界混淆（故增加转义字节），<strong>依赖8位字符</strong>。</li>
</ul>
</li>
<li>比特填充的标志比特法：
<ul>
<li>用特殊的位模式<code>01111110</code>作为帧标志，即一个帧的开始（前一个帧的结束）</li>
<li>且为了处理帧内容中出现一个和帧标志相同的位串<code>01111110</code>。发送方一般在5个1后插入1个0，变为<code>01111101</code>。接收方自动删除第5个1后的0。</li>
<li>优点：可传输任意比特数的帧，传输速率更高。</li>
</ul>
</li>
<li>物理层编码违禁法：
<ul>
<li>在物理层的线路编码方法里头，有一些冗余信号是不会出现在传输数据里的，以其作帧界。</li>
<li>比如，在4B/5B编码中，4B被映射成5B传输，32个模式，只用到16个，剩下的可以用作帧界。</li>
<li>比如，曼彻斯特编码，高电位跳变到低电位表示”1”，相反表示”0”。所以有两个跳变（高-&gt;高，低-&gt;低），两个冗余的跳变是没有使用的，也可拿作帧界。好处是使用冗余信号，不会混淆也不需要填充，故传输速率高。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="32-差错检测和纠正"><a class="markdownIt-Anchor" href="#32-差错检测和纠正"></a> 3.2 差错检测和纠正</h3>
<ul>
<li>码字：包含数据位和校验位的n位单元（n=m+r）。</li>
<li>码率：码字中不包含冗余部分所占的比例，m/n。</li>
<li>海明距离：两个码字中不相同的位的个数。</li>
<li>意义：如果两个码字的海明距离为d，则需要d个1位错误才能将一个码字转变成另一个码字。</li>
<li>海明码，见计组和数字逻辑。</li>
<li>循环冗余校验码（CRC）：
<ul>
<li>任何一个<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span></span></span></span>位的帧，可以看做一个<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">k-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>次的多项式。如1011001，看做<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mn>6</mn></msub><mo>+</mo><msub><mi>x</mi><mn>4</mn></msub><mo>+</mo><msub><mi>x</mi><mn>3</mn></msub><mo>+</mo><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_6+x_4+x_3+x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>（6阶7项多项式）</li>
<li>约定一个<strong>生成多项式</strong>（Generator Polynomial）：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>G</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">G</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>，阶数为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span>，项数为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">r+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>。</li>
<li>现在有一个要计算CRC的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span></span></span></span>位帧的多项式<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>M</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">M(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mo>&gt;</mo><mi>r</mi></mrow><annotation encoding="application/x-tex">m&gt;r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">m</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span>，即<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>M</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">M(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>比<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>G</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">G</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>长。</li>
<li>在<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>M</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">M(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>后附上 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span>个0，成为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mi>r</mi><mi>M</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">xrM(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">x</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>。</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mi>r</mi><mi>M</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mi>G</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>Q</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>R</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">xrM(x)/G(x)=Q(x)+R(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">x</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mord">/</span><span class="mord mathdefault">G</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">Q</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>，其中<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Q</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Q(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">Q</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>为商、<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>为余数，则<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mi>r</mi><mi>M</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi mathvariant="normal">−</mi><mi>R</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">xrM(x)−R(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">x</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mord">−</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>一定能被<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>G</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">G</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>整除。</li>
</ul>
</li>
</ul>
<h3 id="33-基本数据链路层协议"><a class="markdownIt-Anchor" href="#33-基本数据链路层协议"></a> 3.3 基本数据链路层协议</h3>
<h3 id="34-滑动窗口协议"><a class="markdownIt-Anchor" href="#34-滑动窗口协议"></a> 3.4 滑动窗口协议</h3>
<h2 id="第四章介质访问控制子层"><a class="markdownIt-Anchor" href="#第四章介质访问控制子层"></a> 第四章：介质访问控制子层</h2>
<ul>
<li>介质访问控制子层（MAC, Medium Access Control）：用来确定多路访问信道下一个使用者的协议，属于数据链路层的一个子层。</li>
<li>MAC子层位于数据链路层底部。</li>
</ul>
<h3 id="41-信道分配问题"><a class="markdownIt-Anchor" href="#41-信道分配问题"></a> 4.1 信道分配问题</h3>
<h3 id="42-多路访问协议"><a class="markdownIt-Anchor" href="#42-多路访问协议"></a> 4.2 多路访问协议</h3>
<h4 id="421-aloha"><a class="markdownIt-Anchor" href="#421-aloha"></a> 4.2.1 ALOHA</h4>
<ul>
<li>纯ALOHA
<ul>
<li>任何一个工作站都可以在帧生成后立即发送，并通过信号的反馈检测信道以判断是否发送成功。冲突则随机等待后重发。</li>
<li>即任性，想发就发。</li>
<li>生成k帧的概率服从泊松分布：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mi>r</mi><mo stretchy="false">[</mo><mi>k</mi><mo stretchy="false">]</mo><mo>=</mo><msup><mi>G</mi><mi>k</mi></msup><msup><mi>e</mi><mrow><mi mathvariant="normal">−</mi><mi>G</mi></mrow></msup><mi mathvariant="normal">/</mi><mi>k</mi><mo stretchy="false">!</mo></mrow><annotation encoding="application/x-tex">Pr[k]=G^ke^{−G}/k!</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.099108em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathdefault mtight">G</span></span></span></span></span></span></span></span></span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mclose">!</span></span></span></span>。例如生成0帧的概率是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mi>r</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo><mo>=</mo><msup><mi>e</mi><mrow><mi mathvariant="normal">−</mi><mi>G</mi></mrow></msup></mrow><annotation encoding="application/x-tex">Pr[0]=e^{−G}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8413309999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathdefault mtight">G</span></span></span></span></span></span></span></span></span></span></span></span></li>
<li>在2t时间内，发送成功的概率应为，2t内都不才产生新帧的概率：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mn>0</mn><mo>=</mo><mi>P</mi><mi>r</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo><mo>×</mo><mi>P</mi><mi>r</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo><mo>=</mo><msup><mi>e</mi><mrow><mi mathvariant="normal">−</mi><mn>2</mn><mi>G</mi></mrow></msup></mrow><annotation encoding="application/x-tex">P0=Pr[0]×Pr[0]=e^{−2G}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8413309999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">2</span><span class="mord mathdefault mtight">G</span></span></span></span></span></span></span></span></span></span></span></span></li>
<li>将<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mn>0</mn><mo>=</mo><msup><mi>e</mi><mrow><mi mathvariant="normal">−</mi><mn>2</mn><mi>G</mi></mrow></msup></mrow><annotation encoding="application/x-tex">P0=e^{−2G}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8413309999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">2</span><span class="mord mathdefault mtight">G</span></span></span></span></span></span></span></span></span></span></span></span>代入<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mo>=</mo><mi>G</mi><mo>×</mo><mi>P</mi><mn>0</mn></mrow><annotation encoding="application/x-tex">S=G×P0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord">0</span></span></span></span>，得<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mo>=</mo><mi>G</mi><mo>×</mo><msup><mi>e</mi><mrow><mi mathvariant="normal">−</mi><mn>2</mn><mi>G</mi></mrow></msup></mrow><annotation encoding="application/x-tex">S=G×e^{−2G}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8413309999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">2</span><span class="mord mathdefault mtight">G</span></span></span></span></span></span></span></span></span></span></span></span></li>
<li>求导求吞吐率S的极大值：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi mathvariant="normal">′</mi><mo>=</mo><msup><mi>e</mi><mrow><mi mathvariant="normal">−</mi><mn>2</mn><mi>G</mi></mrow></msup><mi mathvariant="normal">−</mi><mn>2</mn><mi>G</mi><mo>×</mo><msup><mi>e</mi><mrow><mi mathvariant="normal">−</mi><mn>2</mn><mi>G</mi></mrow></msup><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">S′=e^{−2G}−2G×e^{−2G}=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord">′</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.924661em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">2</span><span class="mord mathdefault mtight">G</span></span></span></span></span></span></span></span></span><span class="mord">−</span><span class="mord">2</span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8413309999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">2</span><span class="mord mathdefault mtight">G</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>，故当 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>G</mi><mo>=</mo><mn>0.5</mn></mrow><annotation encoding="application/x-tex">G=0.5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">5</span></span></span></span>时， <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mo>≈</mo><mn>0.184</mn></mrow><annotation encoding="application/x-tex">S≈0.184</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">1</span><span class="mord">8</span><span class="mord">4</span></span></span></span></li>
<li>即，纯ALOHA信道的利用率最高为18.4%。</li>
</ul>
</li>
<li>分槽ALOHA
<ul>
<li>把时间分成时隙（时间片），时隙 = 帧时T（较纯ALOHA降低一半）</li>
<li>发送帧必须在时隙的起点，所以冲突值发生在时隙的起点</li>
<li>冲突危险期缩短为T，一旦某个站占用某个时隙并发送成功，则在该时隙内不会出现冲突</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mn>0</mn><mo>=</mo><mi>P</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo><mo>=</mo><msup><mi>e</mi><mrow><mi mathvariant="normal">−</mi><mi>G</mi></mrow></msup></mrow><annotation encoding="application/x-tex">P0=P[0]=e^{−G}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8413309999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathdefault mtight">G</span></span></span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mo>=</mo><mi>G</mi><mo>×</mo><msup><mi>e</mi><mrow><mi mathvariant="normal">−</mi><mi>G</mi></mrow></msup></mrow><annotation encoding="application/x-tex">S=G×e^{−G}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8413309999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathdefault mtight">G</span></span></span></span></span></span></span></span></span></span></span></span></li>
<li>在G=1时取得最大吞吐率：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>m</mi><mi>a</mi><mi>x</mi><mo>=</mo><mn>1</mn><mi>e</mi><mo>≈</mo><mn>0.368</mn></mrow><annotation encoding="application/x-tex">Smax=1e≈0.368</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">m</span><span class="mord mathdefault">a</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">3</span><span class="mord">6</span><span class="mord">8</span></span></span></span></li>
<li>即，分隙ALOHA信道的利用率最高为36.8%。</li>
</ul>
</li>
</ul>
<h4 id="422-载波侦听多路访问协议"><a class="markdownIt-Anchor" href="#422-载波侦听多路访问协议"></a> 4.2.2 载波侦听多路访问协议</h4>
<ul>
<li>
<p>载波侦听多路访问协议（CSMA，Carrier Sense Multiple Access），改进的ALOHA协议。特点：先听后发。</p>
</li>
<li>
<p>非坚持CSMA</p>
<ul>
<li>概念：发送数据之前先侦听信道，若信道空闲，则发送帧；若信道忙碌，则等待一段随机时间后再侦听。</li>
<li>缺点：随机等待时间内介质上没有数据传送，这段时间被浪费，带来更大的延迟。</li>
<li>优点：更好的信道利用率。</li>
</ul>
</li>
<li>
<p>持续式CSMA</p>
<ul>
<li>分为：1-坚持CSMA、P-坚持CSMA</li>
<li>P-坚持CSMA（适用于分时间槽的信道）
<ul>
<li>发送数据之前先侦听信道，若信道空闲，则以P的概率发送，以1-P的概率延迟一个时间槽发送；若信道忙碌，则等待直至信道变成空闲。如果发生冲突，等待一段随机时间后再侦听。</li>
</ul>
</li>
<li>1-坚持CSMA
<ul>
<li>发送数据之前先侦听信道，若信道空闲，则发送帧；若信道忙碌，则等待直至信道变成空闲。如果发生冲突，等待一段随机时间后再侦听。</li>
</ul>
</li>
</ul>
</li>
<li>
<p>CSMA仍然会冲突的原因</p>
<ul>
<li>同时侦听同时传送。</li>
<li>传播延迟。信号在介质传播速度是光速的65%（每微秒200米），在信号未到达接收方的时候，接收方监听信道发现空闲，随后发帧，两帧碰撞冲突。</li>
</ul>
</li>
<li>
<p>冲突窗口</p>
<ul>
<li>冲突危险期：一个工作站能够检测到冲突的时间最大值。</li>
<li>冲突窗口定义为上限：来回时间（RTT，Round Trip Time），2个帧时。</li>
<li>信号在信道传播速度：V = 200m/us</li>
<li>网卡处理帧的时间：网卡延时<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>t</mi><mrow><mi>P</mi><mi>H</mi><mi>Y</mi></mrow></msub></mrow><annotation encoding="application/x-tex">t_{PHY}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76508em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span><span class="mord mathdefault mtight" style="margin-right:0.22222em;">Y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
<li>最远的两个工作站相距：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span></li>
<li>计算得到：冲突窗口=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mi>t</mi><mo>+</mo><mn>2</mn><msub><mi>t</mi><mrow><mi>P</mi><mi>H</mi><mi>Y</mi></mrow></msub></mrow><annotation encoding="application/x-tex">2t+2t_{PHY}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">2</span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span><span class="mord mathdefault mtight" style="margin-right:0.22222em;">Y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，其中<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi><mo>=</mo><mfrac><mi>S</mi><mi>V</mi></mfrac></mrow><annotation encoding="application/x-tex">t=\frac{S}{V}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.217331em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.22222em;">V</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></li>
<li>倘若最远两个工作站间还有中继器，则冲突窗口=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mi mathvariant="normal">（</mi><mi>t</mi><mo>+</mo><msub><mi>t</mi><mrow><mi>P</mi><mi>H</mi><mi>Y</mi></mrow></msub><mo>+</mo><mi>N</mi><mo>×</mo><msub><mi>t</mi><mrow><mi mathvariant="normal">中</mi><mi mathvariant="normal">继</mi><mi mathvariant="normal">器</mi></mrow></msub><mi mathvariant="normal">）</mi></mrow><annotation encoding="application/x-tex">2（t+t_{PHY}+N×t_{中继器}）</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord cjk_fallback">（</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.76508em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span><span class="mord mathdefault mtight" style="margin-right:0.22222em;">Y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.76508em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">中</span><span class="mord cjk_fallback mtight">继</span><span class="mord cjk_fallback mtight">器</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord cjk_fallback">）</span></span></span></span>，其中<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi><mo>=</mo><mfrac><mi>S</mi><mi>V</mi></mfrac></mrow><annotation encoding="application/x-tex">t=\frac{S}{V}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.217331em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.22222em;">V</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></li>
<li>如果冲突发生在最远两个工作站的正中间，那么此时检测到冲突的时间等于最远两个工作站之间的传播延迟。</li>
</ul>
</li>
<li>
<p>带冲突检测的载波侦听多路访问协议（CSMA/CD,CSMA with Collision Detection），也是1-持续的CSMA。半双工以太网中使用。</p>
<ul>
<li>工作原理
<ul>
<li>先听后发、边发边听。</li>
<li>经侦听，若介质空闲，则发送；若介质忙碌，持续侦听至空闲；发送之后，持续侦听是否碰撞冲突，若不冲突则发送成功，若冲突则随机等待后再重复侦听。</li>
<li>发送站感知冲突后，中断发送，之后发送一个非常简短的拥塞信号（Jam信号，是一个强化信号，广播出去通知各工作组该地方发生了碰撞）。</li>
</ul>
</li>
</ul>
</li>
<li>
<p>冲突检测和处理</p>
<ul>
<li>冲突检测的方法：比较发出和收到的两个信号的能量与脉冲宽度变化</li>
<li>冲突检测的要求
<ul>
<li>时隙宽度 = 冲突窗口(最大冲突检测时间)- -&gt; 保证在一个时隙内能够检测到最远距离的冲突。</li>
<li>发送有效帧的时间 &gt;= 冲突窗口 --&gt; 防止因为在发生冲突时，已完成短帧发送而无法知道实际上已发送失败。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="423-无冲突协议"><a class="markdownIt-Anchor" href="#423-无冲突协议"></a> 4.2.3 无冲突协议</h4>
<p>以根本不可能产生冲突的方式解决信道竞争问题。</p>
<ul>
<li>位图协议
<ul>
<li>假定有N个站，每个竞争期有N个槽。</li>
<li>j号站在j号槽中插入1位来声明自己有帧要发送。</li>
<li>经过N个槽后，按照数字顺序开始传送数据。</li>
<li>效率
<ul>
<li>低负载：每一帧的额外开销为N位，数据长度为d位，信道利用率为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>d</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">d/(n+d)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mord">/</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mclose">)</span></span></span></span>。</li>
<li>高负载：若所有站在任何时候都有数据要发送，则N位竞争期被分摊到N个帧上，因此每一帧的额外开销只有1位，信道利用率为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>d</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">d/(1+d)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mord">/</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mclose">)</span></span></span></span>。</li>
</ul>
</li>
</ul>
</li>
<li>令牌传递
<ul>
<li>令牌代表发送权限。</li>
<li>如果站有个等待传输的帧队列，当它接收到令牌就可以发送帧，然后再把令牌传递到下一站。</li>
<li>如果站没有排队的帧要传，则只把令牌传递下去。</li>
</ul>
</li>
<li>二进制倒计数
<ul>
<li>如果一个站想要使用信道，它就以二进制位串的形式广播自己的地址，从高序的位开始。</li>
<li>假定所有的地址具有相同的长度。</li>
<li>不同站地址中相同位在同时发送时被信道布尔或在一起。</li>
<li>假设传输延迟可忽略。</li>
<li>一个站只要看到自己的地址位中的0值被改写成了1，则它必须放弃竞争。</li>
<li>特性：高序站的优先级比低序站的优先级高。</li>
<li>信道利用率<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mi>d</mi><mo>+</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">d/(d+log_2N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mord">/</span><span class="mopen">(</span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>，如果精心设计帧格式，使得发送方的地址正好是帧内的第一个字段，信道利用率为100%。</li>
</ul>
</li>
</ul>
<h4 id="424-有限竞争协议"><a class="markdownIt-Anchor" href="#424-有限竞争协议"></a> 4.2.4 有限竞争协议</h4>
<ul>
<li>低负载下采用竞争的做法而提供较短的延迟，高负载下采用无冲突技术获得良好的信道效率。</li>
</ul>
<h4 id="425-无线局域网协议"><a class="markdownIt-Anchor" href="#425-无线局域网协议"></a> 4.2.5 无线局域网协议</h4>
<ul>
<li>MACA（Multiple Access with Collision Avoidance）：冲突避免多路访问。
<ul>
<li>基本思想：发送方刺激接收方输出一个短帧，以便其附近的站能检测到这次传输，从而避免在接下去进行的（较大）数据帧传输中也发送数据。</li>
<li>A首先给B发送一个RTS（Request to Send）帧，包含了随后将要发送的数据帧的长度。</li>
<li>B用一个CTS（Clear to Send）作为应答，此CTS帧也包含了数据长度（从RTS）中复制过来。</li>
<li>A收到CTS之后开始传输。</li>
</ul>
</li>
</ul>
<h3 id="43-以太网"><a class="markdownIt-Anchor" href="#43-以太网"></a> 4.3 以太网</h3>
<h4 id="431-经典以太网物理层"><a class="markdownIt-Anchor" href="#431-经典以太网物理层"></a> 4.3.1 经典以太网物理层</h4>
<ul>
<li>可以包含多个电缆段和多个中继器，但是不允许任意两个收发器之间的距离超过2.5km，并且任意两个收发器之间经过的中继器不能超过4个。</li>
</ul>
<h4 id="432-经典以太网mac子层协议"><a class="markdownIt-Anchor" href="#432-经典以太网mac子层协议"></a> 4.3.2 经典以太网MAC子层协议</h4>
<ul>
<li>SOF（Start of Frame）：帧起始定界符。</li>
<li>LLC（Logical Link Control）：逻辑链路控制。</li>
<li>IEEE802.3帧结构
<ul>
<li>前导码+帧起始字段：8个Bytes，前7个Bytes都是10101010，最后一个字节10101011（最后一位是1表明帧的开始）。前导码的作用——表明一个帧的开始。
<ul>
<li>而在DIX以太网帧中，帧起始字段最后一位是0。</li>
</ul>
</li>
<li>目的地址：6个Bytes（MAC地址，前24位为OUI表示某公司，后24位表序号）。</li>
<li>源地址：6个Bytes（MAC地址，全球唯一，表示方法是’-‘、’:’、’.’配合16进制）。</li>
<li>长度字段：表明帧长度（不包括前导码、但包括帧头帧尾），帧长度最小64字节最大1518字节。
<ul>
<li>而在DIX以太网帧中，该字段是类型字段，表明上层网络层是什么协议。</li>
<li>如何区分是长度字段还是类型字段：判断大小，{长度字段大小&lt;1536(0x600) 类型字段大小&gt;1536(0x600){长度字段大小&lt;1536(0x600) 类型字段大小&gt;1536(0x600)。</li>
</ul>
</li>
<li>数据字段：搭载了LLC的数据，长度最小是46字节，实际内容小于46则要填充到46，如此加上帧头帧尾的18字节再能保证整个帧至少64字节。</li>
<li>校验字段：4个Bytes，CRC循环冗余校验，除了前导码+帧起始字段都被校验。</li>
<li>有效帧长度至少64Bytes ★
<ul>
<li>CDMA/CD的要求：最短帧发送时间 &gt;= 冲突窗口 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mi>τ</mi></mrow><annotation encoding="application/x-tex">2τ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.1132em;">τ</span></span></span></span></li>
<li>以太网(802.3)规定，在10Mbps局域网中
<ul>
<li>时隙<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mi>τ</mi><mo>=</mo><mn>51.2</mn><mi>μ</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">2τ=51.2μs</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.1132em;">τ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">5</span><span class="mord">1</span><span class="mord">.</span><span class="mord">2</span><span class="mord mathdefault">μ</span><span class="mord mathdefault">s</span></span></span></span></li>
<li>最短帧长度：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>10</mn><mi>M</mi><mi>b</mi><mi>p</mi><mi>s</mi><mo>×</mo><mn>2</mn><mi>τ</mi><mi mathvariant="normal">/</mi><mn>8</mn><mo>=</mo><mn>64</mn><mi>B</mi><mi>y</mi><mi>t</mi><mi>e</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">10Mbps×2τ/8=64Bytes</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault">b</span><span class="mord mathdefault">p</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.1132em;">τ</span><span class="mord">/</span><span class="mord">8</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord">6</span><span class="mord">4</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord mathdefault">t</span><span class="mord mathdefault">e</span><span class="mord mathdefault">s</span></span></span></span>或<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>51200</mn><mi mathvariant="normal">/</mi><mn>100</mn><mi>n</mi><mi>s</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mn>8</mn><mo>=</mo><mn>64</mn><mi>B</mi><mi>y</mi><mi>t</mi><mi>e</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">(51200/100ns)/8=64Bytes</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">5</span><span class="mord">1</span><span class="mord">2</span><span class="mord">0</span><span class="mord">0</span><span class="mord">/</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord mathdefault">n</span><span class="mord mathdefault">s</span><span class="mclose">)</span><span class="mord">/</span><span class="mord">8</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord">6</span><span class="mord">4</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord mathdefault">t</span><span class="mord mathdefault">e</span><span class="mord mathdefault">s</span></span></span></span></li>
</ul>
</li>
<li>为了更加容易区分有效帧和垃圾数据，以太网要求有效帧必须至少64字节</li>
</ul>
</li>
</ul>
</li>
<li>二进制指数后退的CSMA/CA
<ul>
<li>冲突检测到后，时间被分成离散的时隙，时隙长度等于信号在介质上来回传输时间(51.2μs)。一般地，第i次冲突后，等待的时间将从<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>~<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>i</mi></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^i-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.907994em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.824664em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>之间随机选择一个数，然后等待这么多个时间槽。达到10次冲突后，随机数的选择区间被固定在最大值1023，以后不再增加。在16次冲突之后，控制器放弃努力，并给计算机返回一个失败报告。</li>
</ul>
</li>
</ul>
<h4 id="433-以太网性能"><a class="markdownIt-Anchor" href="#433-以太网性能"></a> 4.3.3 以太网性能</h4>
<h4 id="434-交换式以太网"><a class="markdownIt-Anchor" href="#434-交换式以太网"></a> 4.3.4 交换式以太网</h4>
<ul>
<li>集线器</li>
<li>交换机</li>
</ul>
<h4 id="435-快速以太网"><a class="markdownIt-Anchor" href="#435-快速以太网"></a> 4.3.5 快速以太网</h4>
<ul>
<li>快速以太网（100M以太网——IEEE802.3u）
<ul>
<li>要求：跟10M以太网兼容</li>
<li>基本思想：保留原有的帧格式、接口和过程规则</li>
<li>比特时间：100ns -&gt; 10ns</li>
<li>电缆最大长度：2500m - &gt; 250m</li>
</ul>
</li>
<li>编码方式
<ul>
<li>10M以太网：曼彻斯特编码</li>
<li>快速以太网：4B/5B（4bits数据被编码成5bits信号，易实现、电压平衡、效率80%）</li>
</ul>
</li>
</ul>
<h4 id="436-千兆以太网"><a class="markdownIt-Anchor" href="#436-千兆以太网"></a> 4.3.6 千兆以太网</h4>
<ul>
<li>千兆以太网（G比特以太网，GE）：IEEE802.3z
<ul>
<li>兼容10/100M以太网（同时期的两个技术FDDI、ATM不兼容）</li>
<li>主要工作在全双工模式，若半双工，则需要CSMA/CD技术，可能带来传输距离过短的问题 -&gt; 可使用帧串、帧扩充等方法解决</li>
<li>编码方式：8B/10B</li>
</ul>
</li>
</ul>
<h4 id="437-万兆以太网"><a class="markdownIt-Anchor" href="#437-万兆以太网"></a> 4.3.7 万兆以太网</h4>
<h4 id="438-以太网回顾"><a class="markdownIt-Anchor" href="#438-以太网回顾"></a> 4.3.8 以太网回顾</h4>
<h3 id="44-无线局域网"><a class="markdownIt-Anchor" href="#44-无线局域网"></a> 4.4 无线局域网</h3>
<h4 id="441-80211体系结构和协议栈"><a class="markdownIt-Anchor" href="#441-80211体系结构和协议栈"></a> 4.4.1 802.11体系结构和协议栈</h4>
<ul>
<li>分布式系统（distribution system）</li>
<li>自组织网络（ad hoc network）</li>
<li>MAC子层决定如何分配信道，LLC子层隐藏802系列协议之间的差异，使它们在网络层看起来并无差别。</li>
</ul>
<h4 id="442-80211物理层"><a class="markdownIt-Anchor" href="#442-80211物理层"></a> 4.4.2 802.11物理层</h4>
<ul>
<li>频段：2.4GHz或5GHz</li>
</ul>
<h4 id="443-80211mac子层协议"><a class="markdownIt-Anchor" href="#443-80211mac子层协议"></a> 4.4.3 802.11MAC子层协议</h4>
<ul>
<li>CSMA/CA原理：
<ul>
<li>带<strong>冲突避免</strong>的载波侦听多路访问协议。</li>
<li>首先检测信道是否有使用，如果检测出信道空闲，则等待一段随机时间后，才送出数据。</li>
<li>接收端如果正确收到此帧，则经过一段时间间隔后，向发送端发送确认帧ACK。</li>
<li>发送端收到ACK帧，确定数据正确传输，在经历一段时间间隔后，会出现一段空闲时间。</li>
</ul>
</li>
<li>隐藏站问题：
<ul>
<li>假设有3无线通信站ABC如下所示：<br />
A —&gt; (B &lt;— C)<br />
其中B在C的无线电波范围内，但A不在C的无线电波范围内。此时C正在向B传送数据，而A也试图向B传送数据。此时，A不能够监听到B正在忙，而错误的认为此时可以向B传送数据了。如果A向B传送数据，则将导致错误。此即隐藏站问题。其中C是A的隐藏站。</li>
</ul>
</li>
<li>暴露站问题：
<ul>
<li>假设有3无线通信站ABC如下所示：<br />
&lt;—–(A B) —&gt; C<br />
其中B在A的无线电波范围内，但C不在A的无线电波范围内。此时A正在传送数据（向除B以外的某通信站），而B希望给C发送数据，但是错误地认为该传送过程将会失败（因为B会监听到一次传输，所以它会错误地认为此时不能向C发送数据）。此即暴露站问题。其中A是B的暴露站。</li>
</ul>
</li>
<li>网络分配向量（NAV，Network Allocation Vector）：说明这个帧所属的一系列数据将传输多长时间。</li>
</ul>
<h4 id="444-80211帧结构"><a class="markdownIt-Anchor" href="#444-80211帧结构"></a> 4.4.4 802.11帧结构</h4>
<ul>
<li>三种类型的帧：数据帧、控制帧和管理帧。</li>
<li>数据帧：
<ul>
<li>第一个字段是帧控制字段，包括11个子字段：协议版本、类型（比如数据帧10、控制帧01或者管理帧00）、子类型（比如RTS和CTS）、去往DS、来自DS、更多段、重传、电源管理、更多数据、受保护的、顺序。</li>
<li>第二个字段是持续时间字段，它通告本帧和其确认帧将会占用信道多长时间，按微秒计时。</li>
<li>接下来是地址字段，包括<strong>3个</strong>地址：<strong>接收方地址、发送方地址、远程端点</strong>。</li>
<li>序号字段是帧的编号，可用于重复帧的检测。</li>
<li>数据字段包含了有效载荷，长度可以达到2312字节。</li>
<li>帧校验序列字段（CRC）。</li>
</ul>
</li>
<li>管理帧的格式与数据帧的格式相同，其数据部分的的格式因子类型的不同而变。</li>
<li>控制帧要短一些，有帧控制字段、持续时间字段、帧校验序列字段，但只有一个地址，没有数据部分，大多数关键信息都转换成子类型字段。</li>
</ul>
<h4 id="445-服务"><a class="markdownIt-Anchor" href="#445-服务"></a> 4.4.5 服务</h4>
<h3 id="45-宽带无线"><a class="markdownIt-Anchor" href="#45-宽带无线"></a> 4.5 宽带无线</h3>
<h3 id="46-蓝牙"><a class="markdownIt-Anchor" href="#46-蓝牙"></a> 4.6 蓝牙</h3>
<h3 id="47-rfid"><a class="markdownIt-Anchor" href="#47-rfid"></a> 4.7 RFID</h3>
<h3 id="48-数据链路层交换"><a class="markdownIt-Anchor" href="#48-数据链路层交换"></a> 4.8 数据链路层交换</h3>
<ul>
<li>
<p>交换机在交换帧时的三种方式</p>
<ul>
<li>存储转发：交换机把整个帧接收下来，计算校验和并检查该帧无错再做策略。（延迟大、出错率小）</li>
<li>直通交换（贯穿）：在接收时即读入目的端口转发出去。（延迟小、出错率高）</li>
<li>无分片交换：交换时，读满64字节后才转发，不会转发碎片帧，而冲突碎片往往是小于64字节的非法短帧runt。（延迟不大、出错率不高）</li>
</ul>
</li>
<li>
<p>学习网桥：</p>
<ul>
<li>后向学习法：学习的是源地址。</li>
<li>泛洪算法：对于每个发向未知目标地址的入境帧，网桥将它输出到所有的端口，但它来的那个输入端口除外。</li>
<li>若目的端口与源端口相同，则丢弃该帧。</li>
<li>若目的端口与源端口不同，则转发该帧到目的端口。</li>
<li>若目的端口未知（MAC地址查找不到），则泛洪该帧。</li>
<li>网桥可以进行协议转换。</li>
</ul>
</li>
<li>
<p>生成树网桥：</p>
<ul>
<li>生成树算法：Radia Perlman。</li>
<li>STP，Spanning Tree Protocol，IEEE802.1D</li>
<li>每一个网络有一个根网桥；每一个网桥有一个根端口；每一个网段有一个指定端口；剩下的非指定端口不被使用</li>
<li>生成树算法，可在有物理回路的网络中，生成逻辑无回路的生成树，但并不能保证其中的路径最优。</li>
<li>非指定端口虽不参与数据帧的转发，但它会侦听树的工作报文。当树上某些端口失效后，非指定端口将重新启用，形成新的生成树。</li>
</ul>
</li>
<li>
<p>物理层：repeater中继器、hub<br />
数据链路层：Bridge、switch<br />
网络层：Router<br />
传输层：Transport gateway<br />
应用层：Application gateway</p>
</li>
<li>
<p>虚拟局域网</p>
<ul>
<li>802.1Q标准</li>
<li>VLAN：一组逻辑上的设备或用户，不考虑地理位置。</li>
<li>VLAN的实现：
<ul>
<li>基于MAC地址</li>
<li>基于三层协议</li>
<li>基于端口（大多数）：在交换机内部有一张VLAN成员配置表</li>
</ul>
</li>
<li>VLAN成员跨越不同交换机（帧标记法）：
<ul>
<li>帧在通过Trunk干线起点时打上标签，干线终点拆除标签（把这个帧涂上它所在VLAN的颜色）</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="第五章网络层"><a class="markdownIt-Anchor" href="#第五章网络层"></a> 第五章：网络层</h2>
<h3 id="51-网络层的设计问题"><a class="markdownIt-Anchor" href="#51-网络层的设计问题"></a> 5.1 网络层的设计问题</h3>
<ul>
<li>数据报网络：无连接的服务，携带目的机地址，一路查路由表。</li>
<li>虚电路网络：面向连接的服务，不携带目的机地址，携带路径的标号，沿途路由器有带路径标号的路由表。</li>
<li>标签交换：label switching</li>
<li>多协议标签交换：MPLS，MultiProtocol Label Switching</li>
</ul>
<h3 id="52-路由算法"><a class="markdownIt-Anchor" href="#52-路由算法"></a> 5.2 路由算法</h3>
<ul>
<li>非自适应算法（静态路由）和自适应算法（动态路由）</li>
<li>最优化原理：
<ul>
<li>如果一个路由器 J 处在路由器I到路由器K的最优路径上，那么，从路由器J到路由器K的最优路径也在同样的这条路径上。</li>
<li>汇聚树（Sink Tree）：从所有的源到一个给定的目的地的最优路径形成的一棵树，树根是目的地。汇聚树不唯一。路由算法的目的，为所有的路由器发现和使用汇聚树。</li>
</ul>
</li>
<li>距离矢量路由选择算法<br />
DV是分布式Bellman-Ford路由算法，常被用于小型网络，RIP是一个典型的DV<br />
工作原理：
<ul>
<li>维护：每个路由器维护两个向量，Di、SiDi、Si</li>
<li>交换：在邻居路由器之间交换路由信息（矢量）</li>
<li>更新：每个路由器根据收到的矢量信息更新自己的路由表</li>
</ul>
</li>
<li>DV 算法的特点：
<ul>
<li>优点
<ul>
<li>简单</li>
</ul>
</li>
<li>缺点
<ul>
<li>交换的信息太大</li>
<li>路由信息传播慢，可能导致路径信息不一致</li>
<li>收敛慢</li>
<li>度量计数到无穷、路径环</li>
<li>不适合大型的网络</li>
</ul>
</li>
</ul>
</li>
<li>可能的问题：
<ul>
<li>路由环路</li>
<li>无穷计数
<ul>
<li>“好事传千里，坏事传得慢”</li>
<li>解决办法：定义最大跳数、加快收敛</li>
</ul>
</li>
<li>收敛慢
<ul>
<li>收敛：网络查找最佳路径的过程</li>
<li>收敛的加快：水平分割、毒性逆转、抑制定时器、触发更新</li>
</ul>
</li>
<li>因为站得不够高看得不够远，每个路由只从近邻拿信息，无法判断正确与否，可能学习、传播过时信息。全网不断传播错误、过时信息，无法稳定、收敛</li>
</ul>
</li>
<li>链路状态路由选择算法<br />
为解决DV站得不够高看得不够远的问题。<br />
算法思想：
<ul>
<li>发现：向邻居发Hello包，等待回复了解它们的全球唯一名字</li>
<li>设置：到它的每个邻居的成本度量
<ul>
<li>链路带宽的反比</li>
<li>延迟：发送ECHO包，等待回复，通过测量往返时间RTT，获得合理的延迟估计值</li>
</ul>
</li>
<li>构造：Link State Packet，一个分组，包含发送方标识、序列号（防序列号回转问题，用32bits表示）、年龄（解决路由器崩溃和序列号损坏，每过1s，age-1，age=0则丢弃LSP）、邻居列表、到邻居的成本/度量。基于事件/时钟去触发构造。</li>
<li>发送：这个分组给所有其他的路由器
<ul>
<li><strong>逆向路径转发</strong>：新的分组到达，若该分组是新的，被从除了来线路外的其他线路转发/泛洪出去；重复分组丢弃，过时分组拒绝。</li>
<li>保留区：到达的分组不先处理，而是每时钟时间处理一次，期间保留区的相同分组就会被丢弃</li>
</ul>
</li>
<li>计算：dijkstra到每个路由器的最短路径，最短路树</li>
</ul>
</li>
<li>层次路由</li>
<li>广播路由</li>
<li>组播路由</li>
<li>选播路由</li>
<li>移动主机路由</li>
<li>自组织网络路由</li>
</ul>
<h3 id="53-拥塞控制算法"><a class="markdownIt-Anchor" href="#53-拥塞控制算法"></a> 5.3 拥塞控制算法</h3>
<ul>
<li>增加资源
<ul>
<li>在某些点之间使用更多的通道增加带宽（增加通路）</li>
<li>把流量分散到多条路径</li>
<li>启用空闲或备份的路由器</li>
</ul>
</li>
<li>降低负载
<ul>
<li>拒绝为某些用户提供服务</li>
<li>给某些用户的服务降低等级</li>
<li>让用户更有预见性地安排他们的需求</li>
</ul>
</li>
<li>网络供给</li>
<li>流量感知路由</li>
<li>准入控制</li>
<li>流量限制</li>
<li>负载脱落</li>
</ul>
<h3 id="54-服务质量"><a class="markdownIt-Anchor" href="#54-服务质量"></a> 5.4 服务质量</h3>
<ul>
<li>
<p>四个主要参数：带宽、延迟、抖动和丢失。</p>
</li>
<li>
<p>流量整形<br />
用户产生的流量忽大忽小，流量整形就是调节数据传输的平均速率和突发数据流，以减少突发而带来的拥塞、缓存溢出、丢包等问题。<br />
算法：</p>
<ul>
<li>漏桶，Leaky Bucket</li>
<li>令牌桶，Token Bucket</li>
<li>其他：资源预留、准入控制、分组调度等<br />
漏桶：</li>
<li>每个主机连接到网络的接口中都有一个漏桶，即一个优先长度的内部队列</li>
<li>当桶中有分组的时候，输出速率是恒定的，当桶空的时候，输出速率是0</li>
<li>当一个分组到达满的桶的时候，分组将被丢弃（满则溢）</li>
<li>每个时钟周期tick，仅允许一个分组或固定数量的分组发送出去<br />
令牌桶：</li>
<li>改进了漏桶中桶满溢出的问题，桶满丢令牌而不丢分组</li>
<li>允许有上限的数据输出突发</li>
<li>令牌桶拥有令牌（tokens），且以每△T秒产生一个令牌的速度往桶中输入令牌</li>
<li>一个分组要发送的时候，它必要从桶中取出和获取到一个令牌</li>
<li>令牌桶算法允许累积令牌，但最多可以累积 n（令牌桶的容量）个令牌</li>
</ul>
</li>
<li>
<p>最大突发时间的计算：</p>
<ul>
<li>设突发时间：S 秒</li>
<li>已知，令牌桶容量 B 字节，令牌到达速率 R 字节/秒，最大输出速率 M 字节/秒</li>
<li>得到 B+ RS = MS，即 S = B/(M-R)</li>
</ul>
</li>
</ul>
<h3 id="55-网络互联"><a class="markdownIt-Anchor" href="#55-网络互联"></a> 5.5 网络互联</h3>
<ul>
<li>隧道技术</li>
<li>MTU（Path Maximum Transmission Unit）：路径最大传输单元</li>
<li>数据包分段</li>
</ul>
<h3 id="56-internet的网络层"><a class="markdownIt-Anchor" href="#56-internet的网络层"></a> 5.6 Internet的网络层</h3>
<h4 id="561-ipv4协议"><a class="markdownIt-Anchor" href="#561-ipv4协议"></a> 5.6.1 IPv4协议</h4>
<ul>
<li>协议版本：4位，IPv4为0100，IPv6为0110</li>
<li><strong>报头长度（IHL）</strong>：4位，表示IP分组的头部有多长，数据范围为0101~1111，单位是 4 Byte，即最小 20 Byte，最大 60 Byte</li>
<li>区分服务（ds，Differentiated services）：8位，表示分组的重要程度优先级等，可提供一定的服务质量保证、拥塞控制</li>
<li><strong>总长度</strong>：16位，表示包括头部和数据的数据报总长度，单位是 1 Byte，最大为 65535 Byte</li>
<li>标识：16位，标识当前的数据分组的序列号（由发送者来分配，接收方可通过该号码来进行重组）</li>
<li>一个未使用的位：1位</li>
<li>标志位：2位，决定分组是否要进行分片
<ul>
<li>DF（Don’t Fragment）：不分段</li>
<li>MF（More Fragment）：更多的段</li>
</ul>
</li>
<li>分段偏移量：13位，指明了该段在当前数据报中的位置。除了数据报的最后一个段外，其他所有段的长度必须是8字节的倍数。
<ul>
<li>每个数据报最多8192个段，由此支持总长度字段限制的最大数据报。</li>
<li>分片后接收方可通过分片偏移进行重组。</li>
<li>为什么要分片？分组穿越的网络 MTU (载重力)不同。</li>
</ul>
</li>
<li><strong>生存时间（TTL）</strong>：8位，单位 hop，每经过一个路由器，重新封装时把TTL生存时间减1，当TTL=0时，分组被丢弃，向源发回一个超时消息。该字段可防止分组在网络中无限循环。最大的生存期为255秒。</li>
<li><strong>用户协议</strong>：8位，指明它的上层传输层采用的协议，UDP (17)、TCP (6)。</li>
<li>报头校验和：16位，每一跳必须重新计算头校验和，因为TTL总在不断改变。</li>
<li>源IP地址</li>
<li>目的IP地址</li>
<li>数据报选项：可选、可变长的选项，长度不等，该字段允许主机支持不同的选项，比如安全、源路由、时间戳等。</li>
<li>填充：将数据报选项字段填充到32位（4字节）的整数倍</li>
</ul>
<h4 id="562-ip地址"><a class="markdownIt-Anchor" href="#562-ip地址"></a> 5.6.2 IP地址</h4>
<ul>
<li>前缀
<ul>
<li>一个网络对应的一块连续的IP地址空间。</li>
</ul>
</li>
<li>子网
<ul>
<li>IP分组如何送达子网：路由器使用子网掩码来决定分组往哪个子网转发<br />
主路由器（边界路由器）：负责和外部联系<br />
子网掩码：了解内部网络结构的机制
<ul>
<li>点分十进制：如255.255.255.224</li>
<li>/网络位数+子网位数：如/27</li>
<li>目的网络地址 = 目的IP地址 &amp; 子网掩码</li>
<li>举例：131.108.2.2目的IP地址 &amp; 255.255.255.0子网掩码 = 131.108.2.0子网络地址</li>
<li>ABC类IP地址的子网掩码分别是：/8、/16、/24<br />
子网位由主机位借位而来，剩下的主机位中全0为网络地址、全1为广播地址，不能标识主机。</li>
</ul>
</li>
</ul>
</li>
<li>CIDR——无类域间路由
<ul>
<li>如果路由表中有多个表项匹配 (这些表项有不同的子网掩码) ，使用子网掩码最长（子网最小）的那个表项。</li>
</ul>
</li>
<li>分类和特殊寻址
<ul>
<li>A类地址——大型
<ul>
<li>前1×8位是网络部分，后3×8位是主机部分</li>
<li>第一字节的最高位固定为0，故第一字节取值范围为 0∼127</li>
<li>全世界的A类地址总共只有128个</li>
<li>每一个A类网络可容纳 2^24−2个主机</li>
</ul>
</li>
<li>B类地址——中型
<ul>
<li>前2×8位是网络部分，后2×8位是主机部分</li>
<li>第一字节的最高位固定为10，故第一字节取值范围为 128∼191</li>
<li>全世界的B类地址总共只有 2^14 个</li>
<li>每一个B类网络可容纳 2^16−2 个主机</li>
</ul>
</li>
<li>C类地址——小型
<ul>
<li>前3×8位是网络部分，后1×8位是主机部分</li>
<li>第一字节的最高位固定为110，故第一字节取值范围为 192∼223</li>
<li>全世界的C类地址总共只有 2^21 个</li>
<li>每一个C类网络可容纳 254 个主机</li>
</ul>
</li>
<li>区分ABC——看第一字节值的</li>
<li>D类：用作组播</li>
<li>E类：用作一些科研</li>
<li>特殊的保留地址（不分配给特定主机）：
<ul>
<li>网络地址：主机部分全0的地址</li>
<li>广播地址：主机部分全1的地址</li>
<li>0.0.0.0：指该主机、该网络，路由表中默认路由的目的地址</li>
<li>255.255.255.255：泛洪广播地址，为防广播风暴，又退化成本地广播地址</li>
<li>127.0.0.0：环回地址(Lookback Network)，如127.0.0.1表示本机</li>
<li>169.254.0.0：非正常地址，不能与外部正常通信</li>
</ul>
</li>
</ul>
</li>
<li>NAT——网络地址转换
<ul>
<li>NAT思想：
<ul>
<li>内网使用私人地址，当内网需与外网通信，私人地址转换为合法的global的IP地址</li>
<li>NAT转换器（NAT Box），维护地址转换表</li>
</ul>
</li>
<li>NAT优点：
<ul>
<li>节省了公有IP地址</li>
<li>提供了内部网访问外网的灵活性</li>
<li>有一定的保密性</li>
</ul>
</li>
<li>NAT缺点：
<ul>
<li>违背了IP的结构模型——每个IP地址唯一地标识了一台机器</li>
<li>将互联网改变成了“面向连接”的网络，NAT转换器维护着连接的状态，一旦它崩溃，连接也没有了</li>
<li>违背了最基本的协议分层原则，IP是网络层，Port是传输层，跨层工作了</li>
<li>如果传输层不是采用TCP或UDP，而是采用了其它的协议，NAT将不再工作</li>
<li>有些应用会在payload中插入IP地址，然后接收方会提取出该IP地址并使用，但是NAT转换器对此一无所知，导致该类应用不再有效</li>
<li>NAT让一个IP地址可以承载61,440 （65536-4096）个私人地址（超载，PAT）</li>
</ul>
</li>
</ul>
</li>
<li>地址解析协议ARP
<ul>
<li>ARP思想：
<ul>
<li>将IP地址映射到MAC地址</li>
<li>向周围广播：”我是128.1.2.7，谁知道128.1.2.15的MAC地址”</li>
<li>128.1.2.15收到询问自己的ARP请求，才回复</li>
</ul>
</li>
<li>远程主机的MAC地址解析（跨LAN进行ARP）：
<ul>
<li>源将目的MAC地址填上默认网关的MAC</li>
<li>默认网关解封装后重封装时将源、目的MAC分别变为默认网关MAC、目的机MAC</li>
</ul>
</li>
<li>ARP的优化——ARP表：
<ul>
<li>动态建立、更新、维护ARP表</li>
<li>机器上线/配置改变时，向周围广播免费ARP（srcIP=trgtIP），告知周边的MAC地址，不期望收到应答，若意外收到应答则表明自己的IP冲突</li>
<li>收到源的ARP请求非目标机虽不应答，但默默记下源的MAC地址到自己的ARP表</li>
<li>定时删除超时ARP信息</li>
<li>静态配置ARP可以解决动态更新的病毒隐患</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="第六章传输层"><a class="markdownIt-Anchor" href="#第六章传输层"></a> 第六章：传输层</h2>
<h3 id="61-传输服务"><a class="markdownIt-Anchor" href="#61-传输服务"></a> 6.1 传输服务</h3>
<h3 id="62-传输协议的要素"><a class="markdownIt-Anchor" href="#62-传输协议的要素"></a> 6.2 传输协议的要素</h3>
<h3 id="63-拥塞控制"><a class="markdownIt-Anchor" href="#63-拥塞控制"></a> 6.3 拥塞控制</h3>
<h3 id="64-internet传输协议udp"><a class="markdownIt-Anchor" href="#64-internet传输协议udp"></a> 6.4 Internet传输协议：UDP</h3>
<h3 id="65-internet传输协议tcp"><a class="markdownIt-Anchor" href="#65-internet传输协议tcp"></a> 6.5 Internet传输协议：TCP</h3>
<h3 id="66-性能问题"><a class="markdownIt-Anchor" href="#66-性能问题"></a> 6.6 性能问题</h3>
</div><div class="article-licensing box"><div class="licensing-title"><p>计算机网络复习笔记</p><p><a href="https://tongyiheng.github.io/2021/06/13/Computer Networks/revision/">https://tongyiheng.github.io/2021/06/13/Computer Networks/revision/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>TongYiheng</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2021-06-13</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2021-06-21</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Computer-Networks/">Computer Networks</a></div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=606d9ca4caff460011c58b12&amp;product=sop" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/images/wechatpay.png" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2021/04/20/JingYing%20Class/20210420/"><span class="level-item">20210420</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="SOHUCS" sid="2021/06/13/Computer Networks/revision/"></div><script charset="utf-8" src="https://changyan.sohu.com/upload/changyan.js"></script><script>window.changyan.api.config({appid: 'cyvos9r1g',conf: 'prod_21f21ea02dc7b770057084ba69dd7289'});</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/images/profilephoto.jpg" alt="TongYiheng"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">TongYiheng</p><p class="is-size-6 is-block">Trust Your Trust</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>QingDao,China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">20</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">6</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">20</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/tongyiheng" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/tongyiheng"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget is-sticky" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#computer-networks"><span class="level-left"><span class="level-item">1</span><span class="level-item"> Computer Networks</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#写在前面"><span class="level-left"><span class="level-item">1.1</span><span class="level-item"> 写在前面</span></span></a></li><li><a class="level is-mobile" href="#第一章引言"><span class="level-left"><span class="level-item">1.2</span><span class="level-item"> 第一章：引言</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#11-名词解释"><span class="level-left"><span class="level-item">1.2.1</span><span class="level-item"> 1.1 名词解释</span></span></a></li></ul></li><li><a class="level is-mobile" href="#第二章物理层"><span class="level-left"><span class="level-item">1.3</span><span class="level-item"> 第二章：物理层</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#21-数据通信的理论基础"><span class="level-left"><span class="level-item">1.3.1</span><span class="level-item"> 2.1 数据通信的理论基础</span></span></a></li><li><a class="level is-mobile" href="#22-引导性传输介质"><span class="level-left"><span class="level-item">1.3.2</span><span class="level-item"> 2.2 引导性传输介质</span></span></a></li><li><a class="level is-mobile" href="#23-无线传输"><span class="level-left"><span class="level-item">1.3.3</span><span class="level-item"> 2.3 无线传输</span></span></a></li><li><a class="level is-mobile" href="#24-通信卫星"><span class="level-left"><span class="level-item">1.3.4</span><span class="level-item"> 2.4 通信卫星</span></span></a></li><li><a class="level is-mobile" href="#25-数字调制与多路复用"><span class="level-left"><span class="level-item">1.3.5</span><span class="level-item"> 2.5 数字调制与多路复用</span></span></a></li><li><a class="level is-mobile" href="#26-公共电话交换网络"><span class="level-left"><span class="level-item">1.3.6</span><span class="level-item"> 2.6 公共电话交换网络</span></span></a></li></ul></li><li><a class="level is-mobile" href="#第三章数据链路层"><span class="level-left"><span class="level-item">1.4</span><span class="level-item"> 第三章：数据链路层</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#31-数据链路层的设计问题"><span class="level-left"><span class="level-item">1.4.1</span><span class="level-item"> 3.1 数据链路层的设计问题</span></span></a></li><li><a class="level is-mobile" href="#32-差错检测和纠正"><span class="level-left"><span class="level-item">1.4.2</span><span class="level-item"> 3.2 差错检测和纠正</span></span></a></li><li><a class="level is-mobile" href="#33-基本数据链路层协议"><span class="level-left"><span class="level-item">1.4.3</span><span class="level-item"> 3.3 基本数据链路层协议</span></span></a></li><li><a class="level is-mobile" href="#34-滑动窗口协议"><span class="level-left"><span class="level-item">1.4.4</span><span class="level-item"> 3.4 滑动窗口协议</span></span></a></li></ul></li><li><a class="level is-mobile" href="#第四章介质访问控制子层"><span class="level-left"><span class="level-item">1.5</span><span class="level-item"> 第四章：介质访问控制子层</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#41-信道分配问题"><span class="level-left"><span class="level-item">1.5.1</span><span class="level-item"> 4.1 信道分配问题</span></span></a></li><li><a class="level is-mobile" href="#42-多路访问协议"><span class="level-left"><span class="level-item">1.5.2</span><span class="level-item"> 4.2 多路访问协议</span></span></a></li><li><a class="level is-mobile" href="#43-以太网"><span class="level-left"><span class="level-item">1.5.3</span><span class="level-item"> 4.3 以太网</span></span></a></li><li><a class="level is-mobile" href="#44-无线局域网"><span class="level-left"><span class="level-item">1.5.4</span><span class="level-item"> 4.4 无线局域网</span></span></a></li><li><a class="level is-mobile" href="#45-宽带无线"><span class="level-left"><span class="level-item">1.5.5</span><span class="level-item"> 4.5 宽带无线</span></span></a></li><li><a class="level is-mobile" href="#46-蓝牙"><span class="level-left"><span class="level-item">1.5.6</span><span class="level-item"> 4.6 蓝牙</span></span></a></li><li><a class="level is-mobile" href="#47-rfid"><span class="level-left"><span class="level-item">1.5.7</span><span class="level-item"> 4.7 RFID</span></span></a></li><li><a class="level is-mobile" href="#48-数据链路层交换"><span class="level-left"><span class="level-item">1.5.8</span><span class="level-item"> 4.8 数据链路层交换</span></span></a></li></ul></li><li><a class="level is-mobile" href="#第五章网络层"><span class="level-left"><span class="level-item">1.6</span><span class="level-item"> 第五章：网络层</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#51-网络层的设计问题"><span class="level-left"><span class="level-item">1.6.1</span><span class="level-item"> 5.1 网络层的设计问题</span></span></a></li><li><a class="level is-mobile" href="#52-路由算法"><span class="level-left"><span class="level-item">1.6.2</span><span class="level-item"> 5.2 路由算法</span></span></a></li><li><a class="level is-mobile" href="#53-拥塞控制算法"><span class="level-left"><span class="level-item">1.6.3</span><span class="level-item"> 5.3 拥塞控制算法</span></span></a></li><li><a class="level is-mobile" href="#54-服务质量"><span class="level-left"><span class="level-item">1.6.4</span><span class="level-item"> 5.4 服务质量</span></span></a></li><li><a class="level is-mobile" href="#55-网络互联"><span class="level-left"><span class="level-item">1.6.5</span><span class="level-item"> 5.5 网络互联</span></span></a></li><li><a class="level is-mobile" href="#56-internet的网络层"><span class="level-left"><span class="level-item">1.6.6</span><span class="level-item"> 5.6 Internet的网络层</span></span></a></li></ul></li><li><a class="level is-mobile" href="#第六章传输层"><span class="level-left"><span class="level-item">1.7</span><span class="level-item"> 第六章：传输层</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#61-传输服务"><span class="level-left"><span class="level-item">1.7.1</span><span class="level-item"> 6.1 传输服务</span></span></a></li><li><a class="level is-mobile" href="#62-传输协议的要素"><span class="level-left"><span class="level-item">1.7.2</span><span class="level-item"> 6.2 传输协议的要素</span></span></a></li><li><a class="level is-mobile" href="#63-拥塞控制"><span class="level-left"><span class="level-item">1.7.3</span><span class="level-item"> 6.3 拥塞控制</span></span></a></li><li><a class="level is-mobile" href="#64-internet传输协议udp"><span class="level-left"><span class="level-item">1.7.4</span><span class="level-item"> 6.4 Internet传输协议：UDP</span></span></a></li><li><a class="level is-mobile" href="#65-internet传输协议tcp"><span class="level-left"><span class="level-item">1.7.5</span><span class="level-item"> 6.5 Internet传输协议：TCP</span></span></a></li><li><a class="level is-mobile" href="#66-性能问题"><span class="level-left"><span class="level-item">1.7.6</span><span class="level-item"> 6.6 性能问题</span></span></a></li></ul></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Configuring-the-Environment/"><span class="level-start"><span class="level-item">Configuring the Environment</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Data-Structures-Algorithms-and-Applications/"><span class="level-start"><span class="level-item">Data Structures,Algorithms,and Applications</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/Hello-world/"><span class="level-start"><span class="level-item">Hello world</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Notes/"><span class="level-start"><span class="level-item">Notes</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming-Thinking-and-Practice/"><span class="level-start"><span class="level-item">Programming Thinking and Practice</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Recording/"><span class="level-start"><span class="level-item">Recording</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/BFS/"><span class="tag">BFS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C++</span><span class="tag">15</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Computer-Networks/"><span class="tag">Computer Networks</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DFS/"><span class="tag">DFS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/I-O/"><span class="tag">I/O</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/STL/"><span class="tag">STL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Visual-Studio-Code/"><span class="tag">Visual Studio Code</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/"><span class="tag">二叉树</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%9B%BE/"><span class="tag">图</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%A0%86/"><span class="tag">堆</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%8E%92%E5%BA%8F/"><span class="tag">排序</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%A3%E5%88%97%E8%A1%A8/"><span class="tag">散列表</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%A0%88/"><span class="tag">栈</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%A0%91%E5%9E%8B%E7%BB%93%E6%9E%84/"><span class="tag">树型结构</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%A8%80%E7%96%8F%E7%9F%A9%E9%98%B5/"><span class="tag">稀疏矩阵</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%AE%80%E5%8D%95%E7%AE%97%E6%B3%95/"><span class="tag">简单算法</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%B4%A2%E5%BC%95%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91/"><span class="tag">索引二叉搜索树</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BA%BF%E6%80%A7%E8%A1%A8/"><span class="tag">线性表</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%80%92%E5%BD%92/"><span class="tag">递归</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%98%9F%E5%88%97/"><span class="tag">队列</span><span class="tag">4</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">TongYiheng&#039;s Blog</a><p class="is-size-7"><span>&copy; 2021 TongYiheng</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/TongYiheng/TongYiheng.github.io"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/mhchem.js" defer></script><script>window.addEventListener("load", function() {
            document.querySelectorAll('[role="article"] > .content').forEach(function(element) {
                renderMathInElement(element);
            });
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>